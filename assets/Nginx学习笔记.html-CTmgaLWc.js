import{_ as s,c as a,a as e,o as i}from"./app-iMoEB5u2.js";const l={};function d(c,n){return i(),a("div",null,n[0]||(n[0]=[e(`<h1 id="nginx学习笔记" tabindex="-1"><a class="header-anchor" href="#nginx学习笔记"><span>Nginx学习笔记</span></a></h1><h3 id="命令速查" tabindex="-1"><a class="header-anchor" href="#命令速查"><span>命令速查</span></a></h3><p>修改nginx.conf后不停机重新加载配置：</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">nginx -s reload</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="目录结构" tabindex="-1"><a class="header-anchor" href="#目录结构"><span>目录结构</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">nginx</span>
<span class="line">  /conf</span>
<span class="line">    nginx.conf</span>
<span class="line">  /html</span>
<span class="line">    index.html</span>
<span class="line">    50x.html</span>
<span class="line">  /log</span>
<span class="line">    nginx.pid</span>
<span class="line">    error.log</span>
<span class="line">    </span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="nginx的作用" tabindex="-1"><a class="header-anchor" href="#nginx的作用"><span>nginx的作用</span></a></h3><h4 id="_1-反向代理-我们的系统部署在自己的局域网中-外部用户一般情况下无法访问我们的网络" tabindex="-1"><a class="header-anchor" href="#_1-反向代理-我们的系统部署在自己的局域网中-外部用户一般情况下无法访问我们的网络"><span>1. 反向代理：我们的系统部署在自己的局域网中，外部用户一般情况下无法访问我们的网络；</span></a></h4><p>Nginx的反向代理等于开了一个“口子”，提供一个到多个端口，让外部用户能从nginx访问到局域网内的机器。</p><p>配置示例：</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">#nginx监听ip地址为192.168.134.105、端口为9001的请求</span>
<span class="line">server {</span>
<span class="line">    listen       9001;</span>
<span class="line">    server_name  192.168.134.105;</span>
<span class="line"></span>
<span class="line">    #若请求像 192.168.134.105:9001/edu/...   则将请求转发给8080端口</span>
<span class="line">    location ~/edu/ {</span>
<span class="line">        proxy_pass http://127.0.0.1:8080;</span>
<span class="line">    }</span>
<span class="line"></span>
<span class="line">    #若请求像 192.168.134.105:9001/vod/...   则将请求转发给8081端口</span>
<span class="line">    location ~/vod/ {</span>
<span class="line">        proxy_pass http://127.0.0.1:8081;</span>
<span class="line">    }</span>
<span class="line">}</span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-负载均衡-nginx能将请求按照一定的策略-转发给其他的服务器去处理-当发现请求太多了-便可以添加服务器去处理" tabindex="-1"><a class="header-anchor" href="#_2-负载均衡-nginx能将请求按照一定的策略-转发给其他的服务器去处理-当发现请求太多了-便可以添加服务器去处理"><span>2. 负载均衡：nginx能将请求按照一定的策略，转发给其他的服务器去处理；当发现请求太多了，便可以添加服务器去处理；</span></a></h4><p>转发策略有很多种：</p><ul><li>轮询</li><li>weight权重</li><li>iphash</li><li>fair（第三方）</li></ul><p>配置示例（轮询）:</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">    #定义一个负载均衡器，会将进来的请求转发</span>
<span class="line">    upstream myserver{</span>
<span class="line">        server 192.168.134.105:8080;</span>
<span class="line">        server 192.168.134.105:8081;</span>
<span class="line">    }</span>
<span class="line"></span>
<span class="line">    #用户发送请求至192.168.134.105:80/...时，请求会被转发到负载均衡器myserver上</span>
<span class="line">    server {</span>
<span class="line">        listen       80;</span>
<span class="line">        server_name  192.168.134.105;</span>
<span class="line">        #charset koi8-r;</span>
<span class="line"></span>
<span class="line">        #access_log  logs/host.access.log  main;</span>
<span class="line"></span>
<span class="line">        location / {</span>
<span class="line">          root   html; #会从本机中的/html中寻找资源</span>
<span class="line">          index index.html index.htm; #配置默认首页(/html/index.html)</span>
<span class="line">          proxy_pass http://myserver;</span>
<span class="line">        }</span>
<span class="line">	}</span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3-动静分离-将html、图片等资源文件放到nginx上-动态请求则转发给tomcat处理。" tabindex="-1"><a class="header-anchor" href="#_3-动静分离-将html、图片等资源文件放到nginx上-动态请求则转发给tomcat处理。"><span>3. 动静分离：将html、图片等资源文件放到nginx上，动态请求则转发给tomcat处理。</span></a></h4><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">    </span>
<span class="line">    #tomcat负载均衡器</span>
<span class="line">    upstream tomcat{</span>
<span class="line">        server 192.168.134.105:8080;</span>
<span class="line">        server 192.168.134.105:8081;</span>
<span class="line">    }</span>
<span class="line"></span>
<span class="line">    #用户发送请求至192.168.134.105:80/...时，请求会被转发到负载均衡器myserver上</span>
<span class="line">    server {</span>
<span class="line">        listen       80;</span>
<span class="line">        server_name  www.helloworld.com;</span>
<span class="line"></span>
<span class="line">        #处理/**的请求</span>
<span class="line">        location / {</span>
<span class="line">          root   /data/html; #会从本机中的/data/html中寻找资源</span>
<span class="line">          index index.html index.htm; #配置默认首页</span>
<span class="line">        }</span>
<span class="line"></span>
<span class="line">        #处理/image/**的请求</span>
<span class="line">        location /image {</span>
<span class="line">          root   /data; #会从本机中的/data/image中寻找资源</span>
<span class="line">          autoindex on; #打开目录功能</span>
<span class="line">        }</span>
<span class="line"></span>
<span class="line">        #处理/back/**的请求</span>
<span class="line">        location /back {</span>
<span class="line">          proxy_pass http://tomcat; #转发给tomcat</span>
<span class="line">        }</span>
<span class="line">	}</span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="nginx-conf" tabindex="-1"><a class="header-anchor" href="#nginx-conf"><span>nginx.conf</span></a></h3><p>更详细的配置见：<a href="https://gitee.com/fun_zil/dyz-docker-compose-temple/blob/master/docker/nginx/conf/nginx.conf" target="_blank" rel="noopener noreferrer">这里</a></p>`,20)]))}const r=s(l,[["render",d]]),v=JSON.parse('{"path":"/devops/Nginx%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html","title":"Nginx学习笔记","lang":"en-US","frontmatter":{},"git":{"updatedTime":1728468221000,"contributors":[{"name":"dongyz8","username":"dongyz8","email":"dongyz8@gdii-yueyun.com","commits":1,"url":"https://github.com/dongyz8"}],"changelog":[{"hash":"a124420178706444697801263f1005096bad2c82","time":1728468221000,"email":"dongyz8@gdii-yueyun.com","author":"dongyz8","message":"commit"}]},"filePathRelative":"devops/Nginx学习笔记.md"}');export{r as comp,v as data};

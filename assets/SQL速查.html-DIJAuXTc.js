import{_ as n,c as a,a as e,o as p}from"./app-Dz2xZzfz.js";const l={};function t(c,s){return p(),a("div",null,s[0]||(s[0]=[e(`<h1 id="sql速查" tabindex="-1"><a class="header-anchor" href="#sql速查"><span>SQL速查</span></a></h1><h2 id="列转行" tabindex="-1"><a class="header-anchor" href="#列转行"><span>列转行</span></a></h2><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql"><pre><code class="language-sql"><span class="line"><span class="token keyword">select</span> </span>
<span class="line">teacher_name<span class="token punctuation">,</span></span>
<span class="line">GROUP_CONCAT<span class="token punctuation">(</span>student_name<span class="token punctuation">)</span> students</span>
<span class="line"><span class="token keyword">from</span> student</span>
<span class="line"><span class="token keyword">group</span> <span class="token keyword">by</span> teacher_name</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>student表：</p><table><thead><tr><th>teacher_name</th><th>student_name</th></tr></thead><tbody><tr><td>黄老师</td><td>小明</td></tr><tr><td>黄老师</td><td>小红</td></tr><tr><td>红老师</td><td>小黑</td></tr></tbody></table><p>结果：</p><table><thead><tr><th>teacher_name</th><th>students</th></tr></thead><tbody><tr><td>黄老师</td><td>小明,小红</td></tr><tr><td>红老师</td><td>小黑</td></tr></tbody></table><h2 id="获取子字符串" tabindex="-1"><a class="header-anchor" href="#获取子字符串"><span>获取子字符串</span></a></h2><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql"><pre><code class="language-sql"><span class="line"><span class="token comment">-- 获取前2个字符（黄老师 -&gt; 黄老）</span></span>
<span class="line"><span class="token keyword">select</span> SUBSTRING<span class="token punctuation">(</span>student_name<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span> </span>
<span class="line"><span class="token keyword">from</span> student<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">-- 获取第2个字符开始，后面的子字符串（黄老师 -&gt; 老师）</span></span>
<span class="line"><span class="token keyword">select</span> SUBSTRING<span class="token punctuation">(</span>student_name<span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span> </span>
<span class="line"><span class="token keyword">from</span> student<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">-- 获取倒数2个字符串（我是黄老师 -&gt; 老师）</span></span>
<span class="line"><span class="token keyword">select</span> SUBSTRING<span class="token punctuation">(</span>student_name<span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span> </span>
<span class="line"><span class="token keyword">from</span> student<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="字符串拼接" tabindex="-1"><a class="header-anchor" href="#字符串拼接"><span>字符串拼接</span></a></h2><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql"><pre><code class="language-sql"><span class="line"><span class="token comment">-- 用CONCAT函数。支持多个入参</span></span>
<span class="line"><span class="token keyword">select</span></span>
<span class="line">CONCAT<span class="token punctuation">(</span><span class="token string">&#39;A&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;B&#39;</span><span class="token punctuation">,</span>student_name<span class="token punctuation">,</span><span class="token string">&#39;HAHAHA&#39;</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">from</span> student<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="distinct-的用法" tabindex="-1"><a class="header-anchor" href="#distinct-的用法"><span>DISTINCT 的用法</span></a></h2><p>加在SELECT之后，比如：</p><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql"><pre><code class="language-sql"><span class="line"><span class="token keyword">select</span> <span class="token keyword">distinct</span> name<span class="token punctuation">,</span>age <span class="token keyword">from</span> person<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>用于对查出来的行进行去重。</p><p>也可以用于group by的语句：</p><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql"><pre><code class="language-sql"><span class="line"><span class="token keyword">select</span> student_name<span class="token punctuation">,</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token keyword">distinct</span> subject<span class="token punctuation">)</span> </span>
<span class="line"><span class="token keyword">from</span> course <span class="token keyword">group</span> <span class="token keyword">by</span> student_name<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="多字段分组-并取最新那条" tabindex="-1"><a class="header-anchor" href="#多字段分组-并取最新那条"><span>多字段分组，并取最新那条</span></a></h2><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql"><pre><code class="language-sql"><span class="line"><span class="token keyword">SELECT</span> t1<span class="token punctuation">.</span><span class="token operator">*</span></span>
<span class="line"><span class="token keyword">FROM</span> tableName t1</span>
<span class="line"><span class="token keyword">INNER</span> <span class="token keyword">JOIN</span> <span class="token punctuation">(</span></span>
<span class="line">  <span class="token keyword">SELECT</span> groupId<span class="token punctuation">,</span> <span class="token function">MAX</span><span class="token punctuation">(</span>created_at<span class="token punctuation">)</span> <span class="token keyword">AS</span> maxDate</span>
<span class="line">  <span class="token keyword">FROM</span> tableName</span>
<span class="line">  <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> groupId</span>
<span class="line"><span class="token punctuation">)</span> t2 <span class="token keyword">ON</span> t1<span class="token punctuation">.</span>groupId <span class="token operator">=</span> t2<span class="token punctuation">.</span>groupId <span class="token operator">AND</span> t1<span class="token punctuation">.</span>created_at <span class="token operator">=</span> t2<span class="token punctuation">.</span>maxDate<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="取a表中的字段-插入到b表中" tabindex="-1"><a class="header-anchor" href="#取a表中的字段-插入到b表中"><span>取A表中的字段，插入到B表中</span></a></h2><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql"><pre><code class="language-sql"><span class="line"><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> B<span class="token punctuation">(</span></span>
<span class="line">    vendor_code<span class="token punctuation">,</span> </span>
<span class="line">    organization_code<span class="token punctuation">,</span> </span>
<span class="line">    item_code<span class="token punctuation">,</span> </span>
<span class="line">    brand_place<span class="token punctuation">,</span> </span>
<span class="line">    brand_place_id<span class="token punctuation">,</span> </span>
<span class="line">    brand_belong_country</span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">SELECT</span></span>
<span class="line">    s<span class="token punctuation">.</span>vendor_code<span class="token punctuation">,</span></span>
<span class="line">    s<span class="token punctuation">.</span>organization_code<span class="token punctuation">,</span></span>
<span class="line">    s<span class="token punctuation">.</span>item_code<span class="token punctuation">,</span></span>
<span class="line">    s<span class="token punctuation">.</span>BRAND_PLACE<span class="token punctuation">,</span></span>
<span class="line">    s<span class="token punctuation">.</span>BRAND_PLACE_ID<span class="token punctuation">,</span></span>
<span class="line">    p<span class="token punctuation">.</span>BRAND_BELONG_COUNTRY</span>
<span class="line"><span class="token keyword">FROM</span> </span>
<span class="line">    A s</span>
<span class="line"><span class="token keyword">WHERE</span> s<span class="token punctuation">.</span>DELETE_FLAG <span class="token operator">=</span> <span class="token number">0</span></span>
<span class="line">    <span class="token operator">AND</span> s<span class="token punctuation">.</span><span class="token keyword">STATUS</span> <span class="token operator">=</span> <span class="token string">&#39;ACTIVE&#39;</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="取a表中的字段-更新到b表中" tabindex="-1"><a class="header-anchor" href="#取a表中的字段-更新到b表中"><span>取A表中的字段，更新到B表中</span></a></h2><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql"><pre><code class="language-sql"><span class="line"><span class="token comment">-- 1. 取 B 表 中的数据，并变成（organization_code, vendor_code, item_code）维度的数据</span></span>
<span class="line"><span class="token comment">-- 2. 按照（organization_code, vendor_code, item_code）维度，更新到 A 表</span></span>
<span class="line"><span class="token keyword">UPDATE</span> A rb</span>
<span class="line"><span class="token keyword">JOIN</span> <span class="token punctuation">(</span></span>
<span class="line">    <span class="token keyword">SELECT</span> </span>
<span class="line">        organization_code<span class="token punctuation">,</span></span>
<span class="line">        vendor_code<span class="token punctuation">,</span></span>
<span class="line">        item_code<span class="token punctuation">,</span></span>
<span class="line">        GROUP_CONCAT<span class="token punctuation">(</span><span class="token keyword">DISTINCT</span> brand_place<span class="token punctuation">)</span> <span class="token keyword">AS</span> brand_place<span class="token punctuation">,</span></span>
<span class="line">        GROUP_CONCAT<span class="token punctuation">(</span><span class="token keyword">DISTINCT</span> brand_place_id<span class="token punctuation">)</span> <span class="token keyword">AS</span> brand_place_id</span>
<span class="line">    <span class="token keyword">FROM</span> </span>
<span class="line">        B</span>
<span class="line">    <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> </span>
<span class="line">        organization_code<span class="token punctuation">,</span> vendor_code<span class="token punctuation">,</span> item_code</span>
<span class="line"><span class="token punctuation">)</span> so <span class="token keyword">ON</span> rb<span class="token punctuation">.</span>organization_code <span class="token operator">=</span> so<span class="token punctuation">.</span>organization_code</span>
<span class="line">    <span class="token operator">AND</span> rb<span class="token punctuation">.</span>vendor_code <span class="token operator">=</span> so<span class="token punctuation">.</span>vendor_code</span>
<span class="line">    <span class="token operator">AND</span> rb<span class="token punctuation">.</span>item_code <span class="token operator">=</span> so<span class="token punctuation">.</span>item_code</span>
<span class="line"><span class="token keyword">SET</span> </span>
<span class="line">    rb<span class="token punctuation">.</span>ATTRIBUTE9  <span class="token operator">=</span> so<span class="token punctuation">.</span>brand_place<span class="token punctuation">,</span></span>
<span class="line">    rb<span class="token punctuation">.</span>ATTRIBUTE10 <span class="token operator">=</span> so<span class="token punctuation">.</span>brand_place_id</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="日期函数" tabindex="-1"><a class="header-anchor" href="#日期函数"><span>日期函数</span></a></h2><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql"><pre><code class="language-sql"><span class="line"><span class="token keyword">select</span> <span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">from</span> dual<span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">-- 今天（年月日时分秒）。2025-07-28 13:49:27</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">select</span> curdate<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">from</span> dual<span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">-- 今天（年月日）。2025-07-28</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">select</span> curtime<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">from</span> dual<span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">-- 今天（时分秒）。13:46:08</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">select</span> curdate<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token keyword">interval</span> <span class="token number">30</span> <span class="token keyword">day</span> <span class="token keyword">from</span> dual<span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">-- 30天前。2025-06-28</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">select</span> curdate<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token keyword">interval</span> <span class="token number">24</span> <span class="token keyword">hour</span> <span class="token keyword">from</span> dual<span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">-- 24小时前。2025-07-27 00:00:00</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">SELECT</span> DATE_FORMAT<span class="token punctuation">(</span><span class="token function">NOW</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&#39;%Y-%m-%d %H:%i:%s&#39;</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token comment">-- 格式化日期。2025-07-28 13:49:27</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,25)]))}const o=n(l,[["render",t]]),d=JSON.parse('{"path":"/database/mysql/SQL%E9%80%9F%E6%9F%A5.html","title":"SQL速查","lang":"en-US","frontmatter":{"0":"t","1":"i","2":"t","3":"l","4":"e","5":":","6":"S","7":"Q","8":"L","9":"速","10":"查"},"git":{"updatedTime":1754043677000,"contributors":[{"name":"dongyz8","username":"dongyz8","email":"dongyz8@gdii-yueyun.com","commits":7,"url":"https://github.com/dongyz8"}],"changelog":[{"hash":"b690ab6972ca89d54edf592b1047cb0f2309cd76","time":1754043677000,"email":"dongyz8@gdii-yueyun.com","author":"dongyz8","message":"commit"},{"hash":"c4850efc474770a7739428e0a883bf8bb9497131","time":1747994383000,"email":"dongyz8@gdii-yueyun.com","author":"dongyz8","message":"commit"},{"hash":"5db2da61cea53db1b2bf3488c5a26b3b0b7887a7","time":1741342679000,"email":"dongyz8@gdii-yueyun.com","author":"dongyz8","message":"commit"},{"hash":"fb7cc624832f782b737cd66a5463ce109935379b","time":1709287696000,"email":"dongyz8@gdii-yueyun.com","author":"dongyz8","message":"commit"},{"hash":"24e81caa2753cd74fa4fe675250bdd7ec4fcd34e","time":1690453830000,"email":"dongyz8@gdii-yueyun.com","author":"dongyz8","message":"commit"},{"hash":"84d9c8352ac3a41a34102a23d9da894ac6342e6f","time":1690281065000,"email":"dongyz8@gdii-yueyun.com","author":"dongyz8","message":"commit"},{"hash":"ad612453d550772a14baa7197b6319d0c506f6a8","time":1689935603000,"email":"dongyz8@gdii-yueyun.com","author":"dongyz8","message":"commit"}]},"filePathRelative":"database/mysql/SQL速查.md"}');export{o as comp,d as data};
